# ìŒì„± ë©´ì ‘ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¤ê³„ ë¬¸ì„œ

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [í•µì‹¬ ì•„í‚¤í…ì²˜ ì›ì¹™](#í•µì‹¬-ì•„í‚¤í…ì²˜-ì›ì¹™)
3. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
5. [API ì„¤ê³„](#api-ì„¤ê³„)
6. [ê¸°ëŠ¥ íë¦„](#ê¸°ëŠ¥-íë¦„)
7. [ë³´ì•ˆ ë° ì¸ì¦](#ë³´ì•ˆ-ë°-ì¸ì¦)
8. [ë°°í¬ ì•„í‚¤í…ì²˜](#ë°°í¬-ì•„í‚¤í…ì²˜)

---

## ì‹œìŠ¤í…œ ê°œìš”

### ëª©ì 
ì‚¬ìš©ìì˜ ìŠ¤í™, ì±„ìš© ê³µê³ , ìê¸°ì†Œê°œì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ **ìŒì„± ëª¨ì˜ ë©´ì ‘ ë° AI í”¼ë“œë°±**ì„ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤

### í•µì‹¬ ê¸°ëŠ¥
1. **ì±„ìš© ê³µê³  ë¶„ì„**: PDF/í…ìŠ¤íŠ¸ë¡œ ì—…ë¡œë“œí•œ ê³µê³ ë¥¼ AIê°€ ë¶„ì„í•˜ì—¬ í•µì‹¬ í‚¤ì›Œë“œì™€ ìš”êµ¬ ì—­ëŸ‰ ì¶”ì¶œ
2. **ìê¸°ì†Œê°œì„œ í”¼ë“œë°±**: ì‚¬ìš©ì ìŠ¤í™ê³¼ ê³µê³ ë¥¼ ê³ ë ¤í•œ ë§ì¶¤í˜• ìì†Œì„œ í”¼ë“œë°± ì œê³µ
3. **ìŒì„± ëª¨ì˜ ë©´ì ‘**: 
   - AIê°€ ìƒì„±í•œ ìì—°ìŠ¤ëŸ¬ìš´ TTS ìŒì„± ì§ˆë¬¸ (5í„´)
   - ì‚¬ìš©ì ìŒì„± ë‹µë³€ ë…¹ìŒ ë° STT ë³€í™˜
   - ê°œë³„ ë‹µë³€ ë° ì¢…í•© í”¼ë“œë°± ì œê³µ
   - ë‹µë³€ ë‹¤ì‹œ ë“£ê¸° ê¸°ëŠ¥

---

## í•µì‹¬ ì•„í‚¤í…ì²˜ ì›ì¹™

### 1. API-First ì„¤ê³„
í´ë¼ì´ì–¸íŠ¸ì™€ ë°±ì—”ë“œë¥¼ ì™„ë²½í•˜ê²Œ ë¶„ë¦¬í•˜ì—¬ **ì›¹ê³¼ ëª¨ë°”ì¼ ì•±** ëª¨ë‘ ì§€ì›

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Presentation Layer                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Web (SPA)  â”‚      â”‚  Mobile App  â”‚    â”‚
â”‚  â”‚ React/Vue    â”‚      â”‚ RN/Flutter   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ REST API (JSON)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Logic & Data Layer                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Backend API Server                â”‚  â”‚
â”‚  â”‚   FastAPI / NestJS                    â”‚  â”‚
â”‚  â”‚   - ì¸ì¦/ì¸ê°€ (JWT)                   â”‚  â”‚
â”‚  â”‚   - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§                     â”‚  â”‚
â”‚  â”‚   - AI ëª¨ë¸ í˜¸ì¶œ                      â”‚  â”‚
â”‚  â”‚   - íŒŒì¼ ê´€ë¦¬                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Resources Layer                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ PostgreSQL â”‚  â”‚  AWS S3    â”‚  â”‚ OpenAI â”‚â”‚
â”‚  â”‚    DB      â”‚  â”‚   Storage  â”‚  â”‚   API  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ì±…ì„ ë¶„ë¦¬

| Layer | ì—­í•  | ê¸°ìˆ  |
|-------|------|------|
| **Client** | UI ë Œë”ë§, ì‚¬ìš©ì ì…ë ¥, ì˜¤ë””ì˜¤ ë…¹ìŒ/ì¬ìƒ | React/Vue, MediaRecorder API |
| **Backend** | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, AI í˜¸ì¶œ, ë°ì´í„° ê´€ë¦¬ | FastAPI/NestJS |
| **Database** | êµ¬ì¡°í™”ëœ ë°ì´í„° ì €ì¥ | PostgreSQL |
| **Storage** | ë°”ì´ë„ˆë¦¬ íŒŒì¼ ì €ì¥ (PDF, ì˜¤ë””ì˜¤) | AWS S3 / GCS |
| **AI** | ë¶„ì„, ì§ˆë¬¸ ìƒì„±, í”¼ë“œë°±, TTS, STT | OpenAI GPT-4o, TTS-1-HD, Whisper |

---

## ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Language**: Python 3.11+
- **Framework**: FastAPI
- **ORM**: SQLAlchemy 2.0
- **Database**: PostgreSQL 15+
- **Authentication**: JWT (python-jose)
- **File Storage**: boto3 (AWS S3) or google-cloud-storage
- **AI Integration**: OpenAI Python SDK

### Frontend (Web)
- **Framework**: React 18+ or Vue 3+
- **State Management**: Zustand / Pinia
- **HTTP Client**: Axios
- **Audio**: MediaRecorder API, HTML5 Audio
- **UI**: TailwindCSS / Material-UI

### Infrastructure
- **Cloud Provider**: AWS / GCP
- **Storage**: S3 / Cloud Storage
- **Deployment**: Docker + Kubernetes / AWS ECS
- **CI/CD**: GitHub Actions

---

## ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ERD ê°œìš”
```
users (1) â”€â”€â”€ (N) job_postings
   â”‚                   â”‚
   â”‚                   â”‚
   â””â”€â”€â”€ (N) cover_letters (N) â”€â”€â”€ (1) job_postings
              â”‚
              â”‚
         (1) â”œâ”€â”€â”€ (N) interview_sessions
                        â”‚
                        â”‚
                   (1) â””â”€â”€â”€ (N) interview_turns
```

### í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ

#### 1. users (ì‚¬ìš©ì ìŠ¤í™)
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    name VARCHAR(100),
    age INTEGER,
    gender VARCHAR(10), -- 'male', 'female', 'other'
    career_summary TEXT, -- ê²½ë ¥ ìš”ì•½ (JSONB ê°€ëŠ¥)
    certifications TEXT, -- ìê²©ì¦ ëª©ë¡ (JSONB ê°€ëŠ¥)
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_users_email ON users(email);
```

#### 2. job_postings (ì±„ìš© ê³µê³ )
```sql
CREATE TABLE job_postings (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    title VARCHAR(255), -- ê³µê³  ì œëª© (ì„ íƒ)
    original_text TEXT NOT NULL, -- PDF ì¶”ì¶œ í…ìŠ¤íŠ¸
    ai_analysis JSONB, -- {"keywords": [...], "requirements": [...]}
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_job_postings_user_id ON job_postings(user_id);
```

#### 3. cover_letters (ìê¸°ì†Œê°œì„œ)
```sql
CREATE TABLE cover_letters (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    job_posting_id INTEGER REFERENCES job_postings(id) ON DELETE SET NULL,
    content TEXT NOT NULL,
    ai_feedback TEXT, -- AI í”¼ë“œë°±
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_cover_letters_user_id ON cover_letters(user_id);
CREATE INDEX idx_cover_letters_job_posting_id ON cover_letters(job_posting_id);
```

#### 4. interview_sessions (ë©´ì ‘ ì„¸ì…˜)
```sql
CREATE TABLE interview_sessions (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    cover_letter_id INTEGER REFERENCES cover_letters(id) ON DELETE CASCADE,
    total_feedback TEXT, -- ì¢…í•© í”¼ë“œë°±
    status VARCHAR(20) DEFAULT 'in_progress', -- 'in_progress', 'completed'
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP
);

CREATE INDEX idx_interview_sessions_user_id ON interview_sessions(user_id);
CREATE INDEX idx_interview_sessions_cover_letter_id ON interview_sessions(cover_letter_id);
```

#### 5. interview_turns (ë©´ì ‘ í„´)
```sql
CREATE TABLE interview_turns (
    id SERIAL PRIMARY KEY,
    session_id INTEGER REFERENCES interview_sessions(id) ON DELETE CASCADE,
    turn_number INTEGER NOT NULL, -- 1~5
    question_text TEXT NOT NULL, -- AI ìƒì„± ì§ˆë¬¸
    question_audio_url VARCHAR(512), -- TTS ìŒì„± íŒŒì¼ URL
    answer_audio_url VARCHAR(512), -- ì‚¬ìš©ì ë…¹ìŒ íŒŒì¼ URL
    answer_stt_text TEXT, -- STT ë³€í™˜ í…ìŠ¤íŠ¸
    turn_feedback TEXT, -- ê°œë³„ ë‹µë³€ í”¼ë“œë°±
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_interview_turns_session_id ON interview_turns(session_id);
CREATE UNIQUE INDEX idx_interview_turns_session_turn ON interview_turns(session_id, turn_number);
```

---

## API ì„¤ê³„

### ì¸ì¦ (Authentication)

#### POST /api/auth/register
íšŒì›ê°€ì…
```json
Request:
{
  "email": "user@example.com",
  "password": "SecurePass123!",
  "name": "í™ê¸¸ë™",
  "age": 28,
  "gender": "male",
  "career_summary": "ë°±ì—”ë“œ ê°œë°œ 3ë…„",
  "certifications": "ì •ë³´ì²˜ë¦¬ê¸°ì‚¬"
}

Response:
{
  "id": 1,
  "email": "user@example.com",
  "name": "í™ê¸¸ë™"
}
```

#### POST /api/auth/login
ë¡œê·¸ì¸
```json
Request:
{
  "email": "user@example.com",
  "password": "SecurePass123!"
}

Response:
{
  "access_token": "eyJhbGci...",
  "refresh_token": "eyJhbGci...",
  "token_type": "bearer"
}
```

#### POST /api/auth/refresh
í† í° ê°±ì‹ 
```json
Request:
{
  "refresh_token": "eyJhbGci..."
}

Response:
{
  "access_token": "eyJhbGci...",
  "token_type": "bearer"
}
```

---

### ì‚¬ìš©ì ê´€ë¦¬ (Users)

#### GET /api/users/me
í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
```json
Headers: Authorization: Bearer {access_token}

Response:
{
  "id": 1,
  "email": "user@example.com",
  "name": "í™ê¸¸ë™",
  "age": 28,
  "gender": "male",
  "career_summary": "ë°±ì—”ë“œ ê°œë°œ 3ë…„",
  "certifications": "ì •ë³´ì²˜ë¦¬ê¸°ì‚¬"
}
```

#### PATCH /api/users/me
ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
```json
Headers: Authorization: Bearer {access_token}

Request:
{
  "career_summary": "ë°±ì—”ë“œ ê°œë°œ 4ë…„",
  "certifications": "ì •ë³´ì²˜ë¦¬ê¸°ì‚¬, AWS SAA"
}

Response:
{
  "id": 1,
  "email": "user@example.com",
  "career_summary": "ë°±ì—”ë“œ ê°œë°œ 4ë…„",
  "certifications": "ì •ë³´ì²˜ë¦¬ê¸°ì‚¬, AWS SAA"
}
```

---

### ì±„ìš© ê³µê³  (Job Postings)

#### POST /api/job-postings
ê³µê³  ì—…ë¡œë“œ ë° ë¶„ì„
```json
Headers: Authorization: Bearer {access_token}
Content-Type: multipart/form-data

Request (FormData):
- file: <PDF íŒŒì¼>
- title: "ë°±ì—”ë“œ ê°œë°œì ì±„ìš©" (optional)

Response:
{
  "id": 1,
  "title": "ë°±ì—”ë“œ ê°œë°œì ì±„ìš©",
  "original_text": "ìš°ë¦¬ íšŒì‚¬ëŠ”...",
  "ai_analysis": {
    "keywords": ["Python", "FastAPI", "PostgreSQL"],
    "requirements": ["ë°±ì—”ë“œ ê°œë°œ ê²½ë ¥ 3ë…„ ì´ìƒ", "RESTful API ì„¤ê³„ ê²½í—˜"]
  },
  "created_at": "2025-11-14T10:00:00Z"
}
```

#### GET /api/job-postings
ê³µê³  ëª©ë¡ ì¡°íšŒ
```json
Headers: Authorization: Bearer {access_token}

Response:
{
  "items": [
    {
      "id": 1,
      "title": "ë°±ì—”ë“œ ê°œë°œì ì±„ìš©",
      "ai_analysis": {...},
      "created_at": "2025-11-14T10:00:00Z"
    }
  ],
  "total": 1
}
```

#### GET /api/job-postings/{id}
ê³µê³  ìƒì„¸ ì¡°íšŒ
```json
Headers: Authorization: Bearer {access_token}

Response:
{
  "id": 1,
  "title": "ë°±ì—”ë“œ ê°œë°œì ì±„ìš©",
  "original_text": "ìš°ë¦¬ íšŒì‚¬ëŠ”...",
  "ai_analysis": {
    "keywords": ["Python", "FastAPI", "PostgreSQL"],
    "requirements": ["ë°±ì—”ë“œ ê°œë°œ ê²½ë ¥ 3ë…„ ì´ìƒ"]
  },
  "created_at": "2025-11-14T10:00:00Z"
}
```

---

### ìê¸°ì†Œê°œì„œ (Cover Letters)

#### POST /api/cover-letters
ìì†Œì„œ ì‘ì„± ë° í”¼ë“œë°± ìš”ì²­
```json
Headers: Authorization: Bearer {access_token}

Request:
{
  "job_posting_id": 1,
  "content": "ì €ëŠ” 3ë…„ê°„ ë°±ì—”ë“œ ê°œë°œì„..."
}

Response:
{
  "id": 1,
  "job_posting_id": 1,
  "content": "ì €ëŠ” 3ë…„ê°„ ë°±ì—”ë“œ ê°œë°œì„...",
  "ai_feedback": "ì „ë°˜ì ìœ¼ë¡œ ê²½ë ¥ì´ ì˜ ë“œëŸ¬ë‚˜ë‚˜, êµ¬ì²´ì ì¸ í”„ë¡œì íŠ¸ ì„±ê³¼ë¥¼ ì¶”ê°€í•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤...",
  "created_at": "2025-11-14T11:00:00Z"
}
```

#### GET /api/cover-letters
ìì†Œì„œ ëª©ë¡ ì¡°íšŒ
```json
Headers: Authorization: Bearer {access_token}

Response:
{
  "items": [
    {
      "id": 1,
      "job_posting_id": 1,
      "content": "ì €ëŠ” 3ë…„ê°„...",
      "ai_feedback": "ì „ë°˜ì ìœ¼ë¡œ...",
      "created_at": "2025-11-14T11:00:00Z"
    }
  ],
  "total": 1
}
```

#### GET /api/cover-letters/{id}
ìì†Œì„œ ìƒì„¸ ì¡°íšŒ
```json
Headers: Authorization: Bearer {access_token}

Response:
{
  "id": 1,
  "job_posting_id": 1,
  "job_posting": {
    "id": 1,
    "title": "ë°±ì—”ë“œ ê°œë°œì ì±„ìš©",
    "ai_analysis": {...}
  },
  "content": "ì €ëŠ” 3ë…„ê°„ ë°±ì—”ë“œ ê°œë°œì„...",
  "ai_feedback": "ì „ë°˜ì ìœ¼ë¡œ ê²½ë ¥ì´ ì˜ ë“œëŸ¬ë‚˜ë‚˜...",
  "created_at": "2025-11-14T11:00:00Z"
}
```

---

### ë©´ì ‘ ì„¸ì…˜ (Interview Sessions)

#### POST /api/interviews/start
ë©´ì ‘ ì‹œì‘
```json
Headers: Authorization: Bearer {access_token}

Request:
{
  "cover_letter_id": 1
}

Response:
{
  "session_id": 1,
  "status": "in_progress",
  "current_turn": {
    "turn_number": 1,
    "question_text": "ë¨¼ì € ìê¸°ì†Œê°œë¥¼ ë¶€íƒë“œë¦½ë‹ˆë‹¤.",
    "question_audio_url": "https://s3.../question_1.mp3"
  }
}
```

#### POST /api/interviews/{session_id}/answer
ë‹µë³€ ì œì¶œ (í„´ë³„)
```json
Headers: Authorization: Bearer {access_token}
Content-Type: multipart/form-data

Request (FormData):
- turn_number: 1
- audio: <ë…¹ìŒëœ ì˜¤ë””ì˜¤ íŒŒì¼ Blob>

Response:
{
  "turn_number": 1,
  "answer_audio_url": "https://s3.../answer_1.mp3",
  "answer_stt_text": "ì•ˆë…•í•˜ì„¸ìš”, ì €ëŠ” 3ë…„ê°„...",
  "next_turn": {
    "turn_number": 2,
    "question_text": "í”„ë¡œì íŠ¸ì—ì„œ ê°€ì¥ ì–´ë ¤ì› ë˜ ì ì€?",
    "question_audio_url": "https://s3.../question_2.mp3"
  }
}

// 5í„´ ì™„ë£Œ ì‹œ
Response:
{
  "turn_number": 5,
  "answer_audio_url": "https://s3.../answer_5.mp3",
  "answer_stt_text": "...",
  "interview_completed": true,
  "message": "ë©´ì ‘ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í”¼ë“œë°±ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤."
}
```

#### GET /api/interviews/{session_id}/result
ë©´ì ‘ ê²°ê³¼ ë° í”¼ë“œë°± ì¡°íšŒ
```json
Headers: Authorization: Bearer {access_token}

Response:
{
  "session_id": 1,
  "status": "completed",
  "total_feedback": "ì „ë°˜ì ìœ¼ë¡œ ë‹µë³€ì´ êµ¬ì¡°ì ì´ì—ˆìœ¼ë‚˜...",
  "turns": [
    {
      "turn_number": 1,
      "question_text": "ë¨¼ì € ìê¸°ì†Œê°œë¥¼ ë¶€íƒë“œë¦½ë‹ˆë‹¤.",
      "question_audio_url": "https://s3.../question_1.mp3",
      "answer_audio_url": "https://s3.../answer_1.mp3",
      "answer_stt_text": "ì•ˆë…•í•˜ì„¸ìš”, ì €ëŠ”...",
      "turn_feedback": "ìê¸°ì†Œê°œê°€ ëª…í™•í•˜ë‚˜, í•µì‹¬ ì—­ëŸ‰ì„ ë” ê°•ì¡°í•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤."
    },
    // ... turns 2-5
  ],
  "created_at": "2025-11-14T12:00:00Z",
  "completed_at": "2025-11-14T12:15:00Z"
}
```

#### GET /api/interviews/history
ë©´ì ‘ ì´ë ¥ ì¡°íšŒ
```json
Headers: Authorization: Bearer {access_token}

Response:
{
  "items": [
    {
      "session_id": 1,
      "cover_letter_id": 1,
      "status": "completed",
      "created_at": "2025-11-14T12:00:00Z",
      "completed_at": "2025-11-14T12:15:00Z"
    }
  ],
  "total": 1
}
```

---

## ê¸°ëŠ¥ íë¦„

### 1. ìê¸°ì†Œê°œì„œ í”¼ë“œë°± íë¦„

```mermaid
sequenceDiagram
    participant C as Client (Web/App)
    participant B as Backend API
    participant DB as PostgreSQL
    participant AI as OpenAI GPT-4o

    Note over C,AI: 1. ê³µê³  ì—…ë¡œë“œ ë° ë¶„ì„
    C->>B: POST /api/job-postings (PDF)
    B->>B: PDF í…ìŠ¤íŠ¸ ì¶”ì¶œ
    B->>DB: INSERT job_postings (original_text)
    B->>AI: ê³µê³  ë¶„ì„ ìš”ì²­ (keywords, requirements)
    AI-->>B: ë¶„ì„ ê²°ê³¼ JSON
    B->>DB: UPDATE job_postings (ai_analysis)
    B-->>C: ê³µê³  ë¶„ì„ ê²°ê³¼

    Note over C,AI: 2. ìì†Œì„œ ì‘ì„± ë° í”¼ë“œë°±
    C->>C: ì‚¬ìš©ìê°€ ìì†Œì„œ ì‘ì„±
    C->>B: POST /api/cover-letters
    B->>DB: SELECT users, job_postings
    B->>AI: í”¼ë“œë°± ìš”ì²­ (ìŠ¤í™ + ê³µê³  + ìì†Œì„œ)
    AI-->>B: í”¼ë“œë°± í…ìŠ¤íŠ¸
    B->>DB: INSERT cover_letters (ai_feedback)
    B-->>C: ìì†Œì„œ í”¼ë“œë°±
    C->>C: í”¼ë“œë°± UI í‘œì‹œ
```

**ìƒì„¸ ë‹¨ê³„:**

1. **ê³µê³  ì—…ë¡œë“œ**
   - Client: PDF íŒŒì¼ì„ FormDataë¡œ ì „ì†¡
   - Backend: PDFì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ (PyPDF2, pdfplumber ë“±)
   - Backend: `job_postings` í…Œì´ë¸”ì— ì €ì¥

2. **ê³µê³  ë¶„ì„**
   - Backend â†’ GPT-4o: 
     ```
     "ë‹¤ìŒ ì±„ìš© ê³µê³ ë¥¼ ë¶„ì„í•˜ì—¬ JSONìœ¼ë¡œ ë°˜í™˜í•´ì£¼ì„¸ìš”:
     - keywords: í•µì‹¬ í‚¤ì›Œë“œ ë°°ì—´
     - requirements: ìš”êµ¬ ì—­ëŸ‰ ë°°ì—´
     
     [ê³µê³  í…ìŠ¤íŠ¸]"
     ```
   - Backend: ê²°ê³¼ë¥¼ `ai_analysis` JSONB ì»¬ëŸ¼ì— ì €ì¥

3. **ìì†Œì„œ ì œì¶œ**
   - Client: ë¶„ì„ ê²°ê³¼ë¥¼ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ê³ , ìì†Œì„œ í…ìŠ¤íŠ¸ ì…ë ¥ ë°›ìŒ
   - Client â†’ Backend: ìì†Œì„œ í…ìŠ¤íŠ¸ ì „ì†¡

4. **í”¼ë“œë°± ìƒì„±**
   - Backend: DBì—ì„œ users, job_postings, cover_letters ì¡°í•©
   - Backend â†’ GPT-4o:
     ```
     "ë‹¹ì‹ ì€ ì±„ìš© ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
     
     [ì§€ì›ì ìŠ¤í™]
     ë‚˜ì´: 28ì„¸, ê²½ë ¥: ë°±ì—”ë“œ ê°œë°œ 3ë…„, ìê²©ì¦: ì •ë³´ì²˜ë¦¬ê¸°ì‚¬
     
     [ì±„ìš© ê³µê³  ë¶„ì„]
     í‚¤ì›Œë“œ: Python, FastAPI, PostgreSQL
     ìš”êµ¬ì‚¬í•­: ë°±ì—”ë“œ ê°œë°œ ê²½ë ¥ 3ë…„ ì´ìƒ, RESTful API ì„¤ê³„ ê²½í—˜
     
     [ìê¸°ì†Œê°œì„œ]
     ì €ëŠ” 3ë…„ê°„ ë°±ì—”ë“œ ê°œë°œì„...
     
     ìœ„ ìì†Œì„œì— ëŒ€í•œ ì „ë¬¸ì ì¸ í”¼ë“œë°±ì„ ì œê³µí•´ì£¼ì„¸ìš”."
     ```
   - Backend: í”¼ë“œë°±ì„ `ai_feedback`ì— ì €ì¥
   - Backend â†’ Client: í”¼ë“œë°± ì „ì†¡

---

### 2. ìŒì„± ëª¨ì˜ ë©´ì ‘ íë¦„

```mermaid
sequenceDiagram
    participant C as Client
    participant B as Backend
    participant DB as PostgreSQL
    participant S3 as AWS S3
    participant AI as OpenAI (GPT/TTS/Whisper)

    Note over C,AI: A. ë©´ì ‘ ì‹œì‘
    C->>B: POST /api/interviews/start
    B->>DB: INSERT interview_sessions
    B->>DB: SELECT users, job_postings, cover_letters
    B->>AI: GPT-4o: ì²« ì§ˆë¬¸ ìƒì„±
    AI-->>B: Q1 í…ìŠ¤íŠ¸
    B->>AI: TTS-1-HD: Q1 ìŒì„± ìƒì„±
    AI-->>B: Q1 MP3
    B->>S3: ì—…ë¡œë“œ Q1 MP3
    S3-->>B: question_audio_url
    B->>DB: INSERT interview_turns (turn=1)
    B-->>C: {turn: 1, question, audioUrl}

    Note over C,AI: B. ë©´ì ‘ ë£¨í”„ (Turn 1-5)
    C->>C: <audio> ì¬ìƒ (question_audio_url)
    C->>C: TTS ì¢…ë£Œ í›„ ìë™ ë…¹ìŒ ì‹œì‘ (60ì´ˆ)
    C->>C: ë…¹ìŒ ì¢…ë£Œ â†’ Blob ìƒì„±
    C->>B: POST /api/interviews/{id}/answer (FormData: audio)
    B->>S3: ì—…ë¡œë“œ ë‹µë³€ ì˜¤ë””ì˜¤
    S3-->>B: answer_audio_url
    B->>DB: UPDATE interview_turns (answer_audio_url)
    B->>AI: Whisper: STT ë³€í™˜
    AI-->>B: answer_stt_text
    B->>DB: UPDATE interview_turns (answer_stt_text)
    
    alt Turn < 5
        B->>AI: GPT-4o: ë‹¤ìŒ ì§ˆë¬¸ ìƒì„± (ëŒ€í™” ì´ë ¥ í¬í•¨)
        AI-->>B: Q(n+1) í…ìŠ¤íŠ¸
        B->>AI: TTS-1-HD: Q(n+1) ìŒì„± ìƒì„±
        AI-->>B: Q(n+1) MP3
        B->>S3: ì—…ë¡œë“œ Q(n+1) MP3
        S3-->>B: question_audio_url
        B->>DB: INSERT interview_turns (turn=n+1)
        B-->>C: {turn: n+1, question, audioUrl}
        Note over C: ë£¨í”„ ë°˜ë³µ
    else Turn == 5
        B-->>C: {interview_completed: true}
    end

    Note over C,AI: C. ë©´ì ‘ ì¢…ë£Œ ë° í”¼ë“œë°±
    C->>C: "í”¼ë“œë°± ìƒì„± ì¤‘..." UI í‘œì‹œ
    B->>DB: SELECT all turns (Q1~Q5, A1~A5)
    B->>AI: GPT-4o: ì¢…í•© + ê°œë³„ í”¼ë“œë°± ìš”ì²­
    AI-->>B: í”¼ë“œë°± JSON
    B->>DB: UPDATE interview_sessions (total_feedback)
    B->>DB: UPDATE interview_turns (turn_feedback for each)
    B->>DB: UPDATE interview_sessions (status='completed')
    
    C->>B: GET /api/interviews/{id}/result
    B->>DB: SELECT session + turns
    B-->>C: ì „ì²´ í”¼ë“œë°± ë°ì´í„°
    C->>C: ê²°ê³¼ í˜ì´ì§€ ë Œë”ë§
    C->>C: ê° í„´ë³„ ë‹µë³€ ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ í‘œì‹œ
```

**ìƒì„¸ ë‹¨ê³„:**

#### A. ë©´ì ‘ ì‹œì‘ (1íšŒì„±)

1. **ë©´ì ‘ ì´ˆê¸°í™”**
   ```python
   # Backend
   session = InterviewSession(
       user_id=current_user.id,
       cover_letter_id=request.cover_letter_id,
       status="in_progress"
   )
   db.add(session)
   ```

2. **ì²« ì§ˆë¬¸ ìƒì„± (Turn 1)**
   ```python
   # ë°ì´í„° ì¡°í•©
   user_spec = db.query(User).get(current_user.id)
   job_posting = db.query(JobPosting).get(cover_letter.job_posting_id)
   cover_letter = db.query(CoverLetter).get(request.cover_letter_id)
   
   # GPT-4o í˜¸ì¶œ
   prompt = f"""
   ë‹¹ì‹ ì€ {job_posting.ai_analysis['keywords'][0]} ë¶„ì•¼ì˜ ìµœê³  ì „ë¬¸ê°€ì´ì ë©´ì ‘ê´€ì…ë‹ˆë‹¤.
   
   [ì§€ì›ì ìŠ¤í™]
   {user_spec.career_summary}
   
   [ì±„ìš© ê³µê³  ìš”êµ¬ì‚¬í•­]
   {job_posting.ai_analysis['requirements']}
   
   [ìê¸°ì†Œê°œì„œ]
   {cover_letter.content}
   
   ì²« ë²ˆì§¸ ë©´ì ‘ ì§ˆë¬¸ì„ í•´ì£¼ì„¸ìš”. (ì´ 5ê°œ ì§ˆë¬¸ ì˜ˆì •)
   """
   
   response = openai.ChatCompletion.create(
       model="gpt-4o",
       messages=[{"role": "system", "content": prompt}]
   )
   question_text = response.choices[0].message.content
   ```

3. **TTS ìŒì„± ìƒì„±**
   ```python
   # OpenAI TTS-1-HD í˜¸ì¶œ
   tts_response = openai.audio.speech.create(
       model="tts-1-hd",
       voice="alloy",  # ë˜ëŠ” "nova", "shimmer" ë“±
       input=question_text
   )
   
   audio_content = tts_response.content
   ```

4. **S3 ì—…ë¡œë“œ**
   ```python
   # AWS S3 ì—…ë¡œë“œ
   file_key = f"interviews/{session.id}/question_{turn_number}.mp3"
   s3_client.put_object(
       Bucket=BUCKET_NAME,
       Key=file_key,
       Body=audio_content,
       ContentType="audio/mpeg"
   )
   question_audio_url = f"https://{BUCKET_NAME}.s3.amazonaws.com/{file_key}"
   ```

5. **í„´ ë°ì´í„° ì €ì¥**
   ```python
   turn = InterviewTurn(
       session_id=session.id,
       turn_number=1,
       question_text=question_text,
       question_audio_url=question_audio_url
   )
   db.add(turn)
   ```

#### B. ë©´ì ‘ ë£¨í”„ (Turn 1~5)

**Client ì¸¡ ë¡œì§:**

1. **ì§ˆë¬¸ ì¬ìƒ**
   ```javascript
   // React ì˜ˆì‹œ
   const [currentTurn, setCurrentTurn] = useState(null);
   const audioRef = useRef(null);

   useEffect(() => {
     if (currentTurn?.question_audio_url) {
       audioRef.current.src = currentTurn.question_audio_url;
       audioRef.current.play();
     }
   }, [currentTurn]);

   // Audio ìš”ì†Œ
   <audio 
     ref={audioRef} 
     onEnded={handleQuestionEnded}  // TTS ì¬ìƒ ì¢…ë£Œ ì‹œ
   />
   ```

2. **ìë™ ë…¹ìŒ ì‹œì‘**
   ```javascript
   const handleQuestionEnded = async () => {
     // TTS ì¬ìƒ ì™„ë£Œ í›„ ë…¹ìŒ ìë™ ì‹œì‘
     const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
     const mediaRecorder = new MediaRecorder(stream);
     
     const chunks = [];
     mediaRecorder.ondataavailable = (e) => chunks.push(e.data);
     
     mediaRecorder.onstop = async () => {
       const audioBlob = new Blob(chunks, { type: 'audio/webm' });
       await submitAnswer(audioBlob);
     };
     
     mediaRecorder.start();
     
     // 60ì´ˆ íƒ€ì´ë¨¸
     setTimeout(() => {
       mediaRecorder.stop();
     }, 60000);
     
     // ë˜ëŠ” ì‚¬ìš©ì ìˆ˜ë™ ì¤‘ì§€
     setRecorder(mediaRecorder);
   };
   ```

3. **ë‹µë³€ ì œì¶œ**
   ```javascript
   const submitAnswer = async (audioBlob) => {
     const formData = new FormData();
     formData.append('turn_number', currentTurn.turn_number);
     formData.append('audio', audioBlob, `answer_${currentTurn.turn_number}.webm`);
     
     const response = await axios.post(
       `/api/interviews/${sessionId}/answer`,
       formData,
       {
         headers: {
           'Content-Type': 'multipart/form-data',
           'Authorization': `Bearer ${token}`
         }
       }
     );
     
     if (response.data.interview_completed) {
       // ë©´ì ‘ ì¢…ë£Œ
       navigate(`/interviews/${sessionId}/result`);
     } else {
       // ë‹¤ìŒ í„´
       setCurrentTurn(response.data.next_turn);
     }
   };
   ```

**Backend ì¸¡ ë¡œì§:**

1. **ë‹µë³€ ìˆ˜ì‹  ë° ì €ì¥**
   ```python
   @router.post("/{session_id}/answer")
   async def submit_answer(
       session_id: int,
       turn_number: int = Form(...),
       audio: UploadFile = File(...),
       current_user: User = Depends(get_current_user)
   ):
       # S3 ì—…ë¡œë“œ
       file_key = f"interviews/{session_id}/answer_{turn_number}.{audio.filename.split('.')[-1]}"
       s3_client.upload_fileobj(
           audio.file,
           BUCKET_NAME,
           file_key,
           ExtraArgs={"ContentType": audio.content_type}
       )
       answer_audio_url = f"https://{BUCKET_NAME}.s3.amazonaws.com/{file_key}"
       
       # DB ì—…ë°ì´íŠ¸
       turn = db.query(InterviewTurn).filter_by(
           session_id=session_id,
           turn_number=turn_number
       ).first()
       turn.answer_audio_url = answer_audio_url
       db.commit()
   ```

2. **STT ë³€í™˜**
   ```python
       # Whisper STT
       audio_file = s3_client.get_object(Bucket=BUCKET_NAME, Key=file_key)
       transcript = openai.audio.transcriptions.create(
           model="whisper-1",
           file=audio_file["Body"]
       )
       
       turn.answer_stt_text = transcript.text
       db.commit()
   ```

3. **ë‹¤ìŒ ì§ˆë¬¸ ìƒì„± (Turn < 5)**
   ```python
       if turn_number < 5:
           # ëŒ€í™” ì´ë ¥ êµ¬ì„±
           previous_turns = db.query(InterviewTurn).filter_by(
               session_id=session_id
           ).order_by(InterviewTurn.turn_number).all()
           
           conversation_history = "\n".join([
               f"Q{t.turn_number}: {t.question_text}\nA{t.turn_number}: {t.answer_stt_text}"
               for t in previous_turns if t.answer_stt_text
           ])
           
           # GPT-4o í˜¸ì¶œ
           prompt = f"""
           ì´ì „ ëŒ€í™”:
           {conversation_history}
           
           í˜„ì¬ {turn_number + 1}/5 í„´ì…ë‹ˆë‹¤.
           ì´ì „ ë‹µë³€ì„ ê³ ë ¤í•˜ì—¬ ë‹¤ìŒ ì§ˆë¬¸ì„ í•´ì£¼ì„¸ìš”.
           """
           
           response = openai.ChatCompletion.create(
               model="gpt-4o",
               messages=[{"role": "system", "content": prompt}]
           )
           next_question_text = response.choices[0].message.content
           
           # TTS ìƒì„± (A-3ê³¼ ë™ì¼)
           # ... TTS ë° S3 ì—…ë¡œë“œ ...
           
           # ìƒˆ í„´ ìƒì„±
           next_turn = InterviewTurn(
               session_id=session_id,
               turn_number=turn_number + 1,
               question_text=next_question_text,
               question_audio_url=next_question_audio_url
           )
           db.add(next_turn)
           db.commit()
           
           return {
               "turn_number": turn_number,
               "answer_audio_url": answer_audio_url,
               "answer_stt_text": transcript.text,
               "next_turn": {
                   "turn_number": turn_number + 1,
                   "question_text": next_question_text,
                   "question_audio_url": next_question_audio_url
               }
           }
   ```

4. **ë©´ì ‘ ì¢…ë£Œ (Turn == 5)**
   ```python
       else:
           return {
               "turn_number": turn_number,
               "answer_audio_url": answer_audio_url,
               "answer_stt_text": transcript.text,
               "interview_completed": True,
               "message": "ë©´ì ‘ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. í”¼ë“œë°±ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤."
           }
   ```

#### C. ë©´ì ‘ ì¢…ë£Œ ë° í”¼ë“œë°± ìƒì„±

1. **í”¼ë“œë°± ìƒì„± (ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ì¶”ì²œ)**
   ```python
   # ë¹„ë™ê¸° ì‘ì—… (Celery, FastAPI BackgroundTasks ë“±)
   @router.post("/{session_id}/generate-feedback")
   async def generate_feedback(
       session_id: int,
       background_tasks: BackgroundTasks
   ):
       background_tasks.add_task(generate_feedback_task, session_id)
       return {"message": "í”¼ë“œë°± ìƒì„±ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤."}

   def generate_feedback_task(session_id: int):
       # ì „ì²´ í„´ ì¡°íšŒ
       turns = db.query(InterviewTurn).filter_by(
           session_id=session_id
       ).order_by(InterviewTurn.turn_number).all()
       
       # ëŒ€í™” ì´ë ¥ êµ¬ì„±
       full_conversation = "\n\n".join([
           f"[ì§ˆë¬¸ {t.turn_number}]\n{t.question_text}\n\n[ë‹µë³€ {t.turn_number}]\n{t.answer_stt_text}"
           for t in turns
       ])
       
       # GPT-4o í”¼ë“œë°± ìš”ì²­
       prompt = f"""
       ë‹¤ìŒì€ 5í„´ì˜ ë©´ì ‘ ì „ì²´ ê¸°ë¡ì…ë‹ˆë‹¤.
       
       {full_conversation}
       
       ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ í”¼ë“œë°±ì„ ìƒì„±í•´ì£¼ì„¸ìš”:
       
       ## ì¢…í•© í”¼ë“œë°±
       [ì „ì²´ì ì¸ í‰ê°€]
       
       ## ê°œë³„ ë‹µë³€ í”¼ë“œë°±
       ### ì§ˆë¬¸ 1
       [í”¼ë“œë°±]
       
       ### ì§ˆë¬¸ 2
       [í”¼ë“œë°±]
       
       ...
       """
       
       response = openai.ChatCompletion.create(
           model="gpt-4o",
           messages=[{"role": "system", "content": prompt}]
       )
       
       feedback_text = response.choices[0].message.content
       
       # íŒŒì‹± (ì •ê·œí‘œí˜„ì‹ ë“±)
       total_feedback = extract_total_feedback(feedback_text)
       turn_feedbacks = extract_turn_feedbacks(feedback_text)  # List[str]
       
       # DB ì €ì¥
       session = db.query(InterviewSession).get(session_id)
       session.total_feedback = total_feedback
       session.status = "completed"
       session.completed_at = datetime.utcnow()
       
       for i, turn in enumerate(turns):
           turn.turn_feedback = turn_feedbacks[i]
       
       db.commit()
   ```

2. **ê²°ê³¼ ì¡°íšŒ (Client)**
   ```javascript
   // ê²°ê³¼ í˜ì´ì§€ ì§„ì…
   const fetchResult = async () => {
     const response = await axios.get(
       `/api/interviews/${sessionId}/result`,
       {
         headers: { Authorization: `Bearer ${token}` }
       }
     );
     
     setResult(response.data);
   };

   // UI ë Œë”ë§
   return (
     <div>
       <h1>ë©´ì ‘ ê²°ê³¼</h1>
       
       {/* ì¢…í•© í”¼ë“œë°± */}
       <section>
         <h2>ì¢…í•© í”¼ë“œë°±</h2>
         <p>{result.total_feedback}</p>
       </section>
       
       {/* ê°œë³„ í„´ */}
       {result.turns.map((turn) => (
         <div key={turn.turn_number}>
           <h3>ì§ˆë¬¸ {turn.turn_number}</h3>
           <p>{turn.question_text}</p>
           
           {/* ë‚´ ë‹µë³€ ë‹¤ì‹œ ë“£ê¸° */}
           <audio controls src={turn.answer_audio_url} />
           <p><strong>ë‹µë³€ í…ìŠ¤íŠ¸:</strong> {turn.answer_stt_text}</p>
           
           <h4>í”¼ë“œë°±</h4>
           <p>{turn.turn_feedback}</p>
         </div>
       ))}
     </div>
   );
   ```

---

## ë³´ì•ˆ ë° ì¸ì¦

### JWT (JSON Web Token)

#### í† í° êµ¬ì¡°
- **Access Token**: 15ë¶„ ë§Œë£Œ (API ìš”ì²­ì— ì‚¬ìš©)
- **Refresh Token**: 7ì¼ ë§Œë£Œ (Access Token ê°±ì‹ ì— ì‚¬ìš©)

#### í† í° ì €ì¥
- **Web**: `localStorage` (XSS ì£¼ì˜ - CSP ì„¤ì • í•„ìš”)
- **Mobile**: SecureStorage / Keychain

#### ìš”ì²­ í—¤ë”
```
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### ë°±ì—”ë“œ ê²€ì¦
```python
from fastapi import Depends, HTTPException, status
from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
from jose import jwt, JWTError

security = HTTPBearer()

async def get_current_user(
    credentials: HTTPAuthorizationCredentials = Depends(security)
) -> User:
    token = credentials.credentials
    try:
        payload = jwt.decode(token, SECRET_KEY, algorithms=["HS256"])
        user_id: int = payload.get("sub")
        if user_id is None:
            raise HTTPException(
                status_code=status.HTTP_401_UNAUTHORIZED,
                detail="Invalid token"
            )
    except JWTError:
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="Invalid token"
        )
    
    user = db.query(User).get(user_id)
    if user is None:
        raise HTTPException(
            status_code=status.HTTP_401_UNAUTHORIZED,
            detail="User not found"
        )
    return user
```

### íŒŒì¼ ì ‘ê·¼ ì œì–´

#### S3 Private Bucket + Presigned URL
```python
# íŒŒì¼ ì—…ë¡œë“œ ì‹œ privateë¡œ ì„¤ì •
s3_client.put_object(
    Bucket=BUCKET_NAME,
    Key=file_key,
    Body=file_content,
    ACL='private'  # ì¤‘ìš”!
)

# í´ë¼ì´ì–¸íŠ¸ì—ê²ŒëŠ” ì„ì‹œ ì ‘ê·¼ URL ì œê³µ
def generate_presigned_url(file_key: str) -> str:
    url = s3_client.generate_presigned_url(
        'get_object',
        Params={'Bucket': BUCKET_NAME, 'Key': file_key},
        ExpiresIn=3600  # 1ì‹œê°„
    )
    return url

# API ì‘ë‹µ ì‹œ
return {
    "answer_audio_url": generate_presigned_url(turn.answer_audio_url)
}
```

### CORS ì„¤ì •
```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000", "https://yourdomain.com"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

## ë°°í¬ ì•„í‚¤í…ì²˜

### ê°œë°œ í™˜ê²½
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Local Development                   â”‚
â”‚  - Backend: localhost:8000           â”‚
â”‚  - Frontend: localhost:3000          â”‚
â”‚  - DB: PostgreSQL Docker Container   â”‚
â”‚  - Storage: LocalStack (S3 emulator) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í”„ë¡œë•ì…˜ í™˜ê²½
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cloud Infrastructure (AWS Example)                   â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   Route 53  â”‚â”€â”€â”€â”€â”€â”€â”€>â”‚     ALB      â”‚            â”‚
â”‚  â”‚    (DNS)    â”‚        â”‚ (Load Balancer)           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                               â”‚                       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚         â”‚                     â”‚                  â”‚   â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”
â”‚    â”‚   ECS   â”‚          â”‚   ECS   â”‚      â”‚   S3    â”‚â”‚
â”‚    â”‚ (Backendâ”‚          â”‚ (Backendâ”‚      â”‚ (Files) â”‚â”‚
â”‚    â”‚ Container)         â”‚ Container)     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                     â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                   â”‚                                  â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚            â”‚   RDS        â”‚                          â”‚
â”‚            â”‚ (PostgreSQL) â”‚                          â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                       â”‚
â”‚  Frontend: CloudFront + S3 (Static Hosting)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Docker Compose (ê°œë°œìš©)
```yaml
# docker-compose.yml
version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/interview_db
      - AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
      - AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
    depends_on:
      - db
    volumes:
      - ./backend:/app

  db:
    image: postgres:15
    environment:
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
      - POSTGRES_DB=interview_db
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    volumes:
      - ./frontend:/app
      - /app/node_modules

volumes:
  postgres_data:
```

---

## í™•ì¥ ê³ ë ¤ì‚¬í•­

### 1. ì„±ëŠ¥ ìµœì í™”
- **ìºì‹±**: Redisë¡œ ê³µê³  ë¶„ì„ ê²°ê³¼, ì‚¬ìš©ì ì„¸ì…˜ ìºì‹±
- **ë¹„ë™ê¸° ì‘ì—…**: Celeryë¡œ TTS/STT/í”¼ë“œë°± ìƒì„±ì„ ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬
- **CDN**: CloudFrontë¡œ ì •ì  íŒŒì¼ ë° ì˜¤ë””ì˜¤ íŒŒì¼ ë°°í¬

### 2. ëª¨ë‹ˆí„°ë§
- **ë¡œê¹…**: ELK Stack (Elasticsearch, Logstash, Kibana)
- **ë©”íŠ¸ë¦­**: Prometheus + Grafana
- **ì—ëŸ¬ ì¶”ì **: Sentry

### 3. ë¹„ìš© ìµœì í™”
- **S3 Lifecycle**: ì˜¤ë˜ëœ ë…¹ìŒ íŒŒì¼ì€ Glacierë¡œ ìë™ ì´ì „
- **OpenAI API**: í† í° ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ ë° ìµœì í™”
- **DB Indexing**: ìì£¼ ì¡°íšŒë˜ëŠ” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ì¶”ê°€

### 4. í–¥í›„ ê¸°ëŠ¥
- **ì‹¤ì‹œê°„ í”¼ë“œë°±**: WebSocketìœ¼ë¡œ ë‹µë³€ ì¤‘ ì‹¤ì‹œê°„ ìŒì„± ë¶„ì„
- **ë‹¤êµ­ì–´ ì§€ì›**: i18n, ë‹¤êµ­ì–´ TTS/STT
- **ëª¨ë°”ì¼ ì•±**: React Native ë˜ëŠ” Flutter ê°œë°œ

---

## ê°œë°œ ë‹¨ê³„ë³„ ê°€ì´ë“œ

### Phase 1: ê¸°ë°˜ êµ¬ì¶• (1-2ì£¼)
- [ ] í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ì • (Backend: FastAPI, Frontend: React)
- [ ] PostgreSQL ìŠ¤í‚¤ë§ˆ ìƒì„± ë° ë§ˆì´ê·¸ë ˆì´ì…˜ ë„êµ¬ ì„¤ì • (Alembic)
- [ ] JWT ì¸ì¦ êµ¬í˜„ (íšŒì›ê°€ì…, ë¡œê·¸ì¸, í† í° ê°±ì‹ )
- [ ] AWS S3 ì—°ë™ ë° íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥

### Phase 2: ìê¸°ì†Œê°œì„œ í”¼ë“œë°± (1ì£¼)
- [ ] ì±„ìš© ê³µê³  ì—…ë¡œë“œ API (PDF íŒŒì‹±)
- [ ] OpenAI GPT-4o ê³µê³  ë¶„ì„ API
- [ ] ìì†Œì„œ ì‘ì„± ë° í”¼ë“œë°± API
- [ ] í”„ë¡ íŠ¸ì—”ë“œ: ê³µê³ /ìì†Œì„œ ì…ë ¥ UI

### Phase 3: ìŒì„± ë©´ì ‘ (2-3ì£¼)
- [ ] ë©´ì ‘ ì‹œì‘ API (GPT-4o ì§ˆë¬¸ ìƒì„±)
- [ ] OpenAI TTS-1-HD ìŒì„± ìƒì„±
- [ ] í”„ë¡ íŠ¸ì—”ë“œ: MediaRecorder ë…¹ìŒ ê¸°ëŠ¥
- [ ] ë‹µë³€ ì œì¶œ API (S3 ì—…ë¡œë“œ, Whisper STT)
- [ ] ë‹¤ìŒ ì§ˆë¬¸ ìƒì„± ë¡œì§ (ëŒ€í™” ì´ë ¥ ê´€ë¦¬)
- [ ] í”¼ë“œë°± ìƒì„± API
- [ ] í”„ë¡ íŠ¸ì—”ë“œ: ê²°ê³¼ í˜ì´ì§€ (ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ í¬í•¨)

### Phase 4: í…ŒìŠ¤íŠ¸ ë° ìµœì í™” (1ì£¼)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë° í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ ìµœì í™” (DB ì¿¼ë¦¬, API ì‘ë‹µ ì‹œê°„)
- [ ] UI/UX ê°œì„ 
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”

### Phase 5: ë°°í¬ (1ì£¼)
- [ ] Docker ì´ë¯¸ì§€ ë¹Œë“œ
- [ ] AWS ì¸í”„ë¼ êµ¬ì„± (ECS, RDS, S3, CloudFront)
- [ ] CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• (GitHub Actions)
- [ ] ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… ì„¤ì •

---

## ì°¸ê³  ìë£Œ

### OpenAI API Docs
- [GPT-4o](https://platform.openai.com/docs/models/gpt-4o)
- [TTS-1-HD](https://platform.openai.com/docs/guides/text-to-speech)
- [Whisper](https://platform.openai.com/docs/guides/speech-to-text)

### Backend
- [FastAPI](https://fastapi.tiangolo.com/)
- [SQLAlchemy](https://docs.sqlalchemy.org/)
- [Alembic](https://alembic.sqlalchemy.org/)

### Frontend
- [MediaRecorder API](https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder)
- [Web Audio API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)

### Cloud
- [AWS S3 Presigned URLs](https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html)
- [AWS ECS](https://docs.aws.amazon.com/ecs/)

---

## ë¼ì´ì„ ìŠ¤
MIT License

---

**ì‘ì„±ì¼**: 2025-11-14  
**ë²„ì „**: 1.0.0  
**ë¬¸ì„œ ê´€ë¦¬**: ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ë•Œë§ˆë‹¤ ë²„ì „ ì—…ë°ì´íŠ¸ ë° ì´ë ¥ ê´€ë¦¬

